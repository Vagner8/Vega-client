<ul
  class="list"
  [class.two-items]="rows().length === 2"
  [class.three-or-more-items]="rows().length >= 3">
  @for (row of rows(); track row.cursor) {
    <li class="item">
      <mat-card appearance="outlined">
        <mat-card-header>
          <mat-card-title-group>
            <button type="button" mat-flat-button (click)="deleteRow(row)">Cancel</button>
            <mat-card-title> {{ $index + 1 }}</mat-card-title>
            @if (row.formGroup.dirty) {
              <mat-card-subtitle class="touched">Touched</mat-card-subtitle>
            } @else {
              <mat-card-subtitle class="untouched">Untouched</mat-card-subtitle>
            }
          </mat-card-title-group>
        </mat-card-header>
        <mat-card-content>
          @switch (modifier()) {
            @case ('Save') {
              @for (indicator of sort(); track indicator) {
                {{ indicator }}: {{ row.formGroup.get(indicator)?.value }}
              }
            }
            @case ('Edit') {
              <app-form [sort]="sort()" [formGroup]="row.formGroup" />
            }
            @case ('New') {
              <app-form [sort]="sort()" [formGroup]="row.formGroup" />
            }
            @case ('Delete') {
              @for (indicator of sort(); track indicator) {
                <mat-card appearance="outlined">
                  <mat-card-content
                    >{{ indicator }}: {{ row.formGroup.get(indicator)?.value }}</mat-card-content
                  >
                </mat-card>
              }
            }
          }
        </mat-card-content>
      </mat-card>
    </li>
  }
</ul>
